# Решение ошибок загрузки сайта

## Проблема

Ошибки в консоли браузера:
- `Uncaught SyntaxError: Unexpected token '<'` в `tilda-polyfill-1.0.min.js:1`
- `Uncaught ReferenceError: $ is not defined` (jQuery не загрузился)
- `Форма не загрузилась после всех попыток`

**Причина:** Сервер возвращает HTML (index.html) вместо JavaScript файлов, когда файлы не найдены или пути неправильные.

## Решение

### Шаг 1: Пересоздать HTML из оригинального файла

HTML файл содержит артефакты PowerShell скрипта. Нужно пересоздать его:

```powershell
# Скопируйте оригинальный файл
Copy-Item index_original.html index.html -Force

# Запустите правильный скрипт обработки
powershell -ExecutionPolicy Bypass -File process_html_complete.ps1
```

### Шаг 2: Проверьте наличие всех файлов

Убедитесь, что все файлы существуют:

```powershell
# Проверьте CSS файлы
Get-ChildItem assets/css/*.css

# Проверьте JS файлы  
Get-ChildItem assets/js/*.js
```

Должны быть файлы:
- `tilda-grid-3.0.min.css`
- `tilda-blocks-page69429579.min.css`
- `jquery-1.10.2.min.js`
- `tilda-scripts-3.0.min.js`
- и другие...

### Шаг 3: Исправьте пути в HTML

Все пути должны начинаться с `/assets/` (абсолютные пути):

```html
<!-- Правильно -->
<link rel="stylesheet" href="/assets/css/tilda-grid-3.0.min.css">
<script src="/assets/js/jquery-1.10.2.min.js"></script>

<!-- Неправильно -->
<link rel="stylesheet" href="assets/css/tilda-grid-3.0.min.css">
<script src="assets/js/jquery-1.10.2.min.js"></script>
```

### Шаг 4: Убедитесь, что сервер правильно настроен

В `server.js` статические файлы должны быть настроены ПЕРЕД маршрутом `app.get('*')`:

```javascript
// Статические файлы - ПЕРЕД всеми маршрутами
app.use('/assets', express.static(path.join(__dirname, 'assets')));
app.use('/admin', express.static(path.join(__dirname, 'admin')));
app.use('/public', express.static(path.join(__dirname, 'public')));

// API маршруты
// ...

// Главная страница
app.get('/', (req, res) => {
  res.sendFile(path.join(__dirname, 'index.html'));
});

// Обработка всех остальных маршрутов - ПОСЛЕДНИМ
app.get('*', (req, res) => {
  // Пропускаем статические файлы
  if (req.path.startsWith('/api') || 
      req.path.startsWith('/admin') || 
      req.path.startsWith('/assets') ||
      req.path.startsWith('/public')) {
    return res.status(404).json({ error: 'Not found' });
  }
  res.sendFile(path.join(__dirname, 'index.html'));
});
```

### Шаг 5: Перезапустите сервер

```powershell
# Остановите сервер (Ctrl+C)
# Запустите заново
npm start
```

### Шаг 6: Проверьте в браузере

1. Откройте http://localhost:3000
2. Нажмите F12 (DevTools)
3. Перейдите на вкладку "Network"
4. Обновите страницу (F5)
5. Проверьте, что все файлы загружаются (статус 200, не 404)

## Быстрое исправление путей

Если нужно быстро исправить все пути в HTML:

```powershell
$content = Get-Content index.html -Raw
$content = $content -replace 'href="assets/', 'href="/assets/'
$content = $content -replace 'src="assets/', 'src="/assets/'
$content = $content -replace "url\('assets/", "url('/assets/"
$content = $content -replace 'url\("assets/', 'url("/assets/'
$content | Set-Content index.html -NoNewline
```

## Если проблема не решается

1. Проверьте логи сервера в консоли
2. Проверьте консоль браузера (F12) - какие файлы не загружаются?
3. Убедитесь, что все файлы существуют в папках `assets/css/` и `assets/js/`
4. Проверьте, что пути в HTML правильные (начинаются с `/assets/`)

## Важно

- Все пути к ресурсам должны быть **абсолютными** (начинаться с `/`)
- Сервер должен обрабатывать статические файлы **ДО** маршрута `app.get('*')`
- HTML файл не должен содержать артефакты PowerShell скрипта

